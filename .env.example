# ============================================================================
# MCP v7 — Managed Control Platform
# Environment Variables Template
# ============================================================================
# Copy this file to .env and fill in all values before running mcp-install.sh
#   cp .env.example .env
#   chmod 600 .env
# ============================================================================

# === PROJECT ================================================================
COMPOSE_PROJECT_NAME=mcp
MCP_HOST_IP=192.168.1.100
MCP_DOMAIN=mcp.local
MCP_TIMEZONE=Europe/Berlin

# === POSTGRESQL (Central Database — #1 mcp-postgres) ========================
POSTGRES_USER=mcp_admin
POSTGRES_PASSWORD=CHANGE_ME_postgres_32char_minimum!!
POSTGRES_DB=mcp_core

# --- Per-Service Database Credentials ---
# Keycloak
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=CHANGE_ME_keycloak_db_password!!
KEYCLOAK_DB_NAME=keycloak

# n8n
N8N_DB_USER=n8n
N8N_DB_PASSWORD=CHANGE_ME_n8n_db_password!!
N8N_DB_NAME=n8n

# Zammad
ZAMMAD_DB_USER=zammad
ZAMMAD_DB_PASSWORD=CHANGE_ME_zammad_db_password!!
ZAMMAD_DB_NAME=zammad

# BookStack (uses MariaDB, not PostgreSQL)
BOOKSTACK_DB_USER=bookstack
BOOKSTACK_DB_PASSWORD=CHANGE_ME_bookstack_db_password!!
BOOKSTACK_DB_NAME=bookstack
BOOKSTACK_MARIADB_ROOT_PASSWORD=CHANGE_ME_mariadb_root_password!!
# REQUIRED: Generate with: php -r "echo 'base64:' . base64_encode(random_bytes(32)) . PHP_EOL;"
# Or: openssl rand -base64 32 | sed 's/^/base64:/'
BOOKSTACK_APP_KEY=CHANGE_ME_generate_with_command_above!!

# Grafana
GRAFANA_DB_USER=grafana
GRAFANA_DB_PASSWORD=CHANGE_ME_grafana_db_password!!
GRAFANA_DB_NAME=grafana

# Zabbix
ZABBIX_DB_USER=zabbix
ZABBIX_DB_PASSWORD=CHANGE_ME_zabbix_db_password!!
ZABBIX_DB_NAME=zabbix

# Guacamole
GUACAMOLE_DB_USER=guacamole
GUACAMOLE_DB_PASSWORD=CHANGE_ME_guacamole_db_password!!
GUACAMOLE_DB_NAME=guacamole

# === REDIS (#2 mcp-redis — Cache) ==========================================
REDIS_PASSWORD=CHANGE_ME_redis_password!!

# === PGVECTOR (#3 mcp-pgvector — RAG Vector DB) ============================
PGVECTOR_USER=pgvector
PGVECTOR_PASSWORD=CHANGE_ME_pgvector_password!!
PGVECTOR_DB=mcp_vectors

# === OPENBAO (#4 mcp-openbao — Secrets Management) =========================
OPENBAO_DEV_ROOT_TOKEN=CHANGE_ME_openbao_root_token!!

# === KEYCLOAK (#6 mcp-keycloak — Identity & MFA) ===========================
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_keycloak_admin_password!!
# KC_DB_URL, KC_DB_USERNAME, KC_DB_PASSWORD werden aus KEYCLOAK_DB_* abgeleitet (siehe oben)

# === N8N (#7 mcp-n8n — Workflow Automation) =================================
N8N_ENCRYPTION_KEY=CHANGE_ME_n8n_encryption_key_32chars!!
WEBHOOK_URL=http://${MCP_HOST_IP}/auto

# === NTFY (#8 mcp-ntfy — Push Notifications) ================================
NTFY_BASE_URL=http://ntfy:80

# === ZAMMAD (#9-#11 — Ticketing) ============================================
ZAMMAD_RAILSSERVER_WORKERS=1
ZAMMAD_AI_TOKEN=CHANGE_ME_zammad_api_token!!

# === ELASTICSEARCH (#12 — Zammad Search) ====================================
ES_JAVA_OPTS="-Xms512m -Xmx512m"

# === VAULTWARDEN (#14 — Password Manager) ===================================
VAULTWARDEN_ADMIN_TOKEN=CHANGE_ME_vaultwarden_admin_token!!

# === GRAFANA (#19 — Dashboards) =============================================
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME_grafana_admin_password!!

# === ZABBIX (#17-#18 — Monitoring) ==========================================
ZABBIX_SERVER_NAME=MCP-Zabbix

# === UPTIME KUMA (#22 — Availability Monitoring) ============================
# No special env vars — configured via web UI after first start

# === CROWDSEC (#23 — Intrusion Detection) ===================================
CROWDSEC_BOUNCER_KEY=CHANGE_ME_crowdsec_bouncer_key!!

# === AI STACK (#28-#32) =====================================================
AI_GATEWAY_SECRET=CHANGE_ME_ai_gateway_secret_token!!
REDIS_QUEUE_PASSWORD=CHANGE_ME_redis_queue_password!!
OLLAMA_MODEL=mistral:7b-instruct-v0.3-q4_K_M
OLLAMA_FALLBACK_MODEL=llama3:8b-instruct-q4_K_M
EMBEDDING_MODEL=nomic-embed-text
LITELLM_MASTER_KEY=CHANGE_ME_litellm_master_key!!

# === IMAGE TAGS (Exact versions — never use short forms) ====================
# Core Stack
POSTGRES_TAG=16-alpine
REDIS_TAG=7-alpine
PGVECTOR_TAG=pg16
OPENBAO_TAG=2.1
NGINX_TAG=1.27-alpine
KEYCLOAK_TAG=26.0
N8N_TAG=1.76.1
NTFY_TAG=latest

# Ops Stack
ZAMMAD_TAG=6.4.1
ELASTICSEARCH_TAG=8.17.0
MEMCACHED_TAG=1.6-alpine
BOOKSTACK_TAG=24.12.1
MARIADB_TAG=11.6
VAULTWARDEN_TAG=1.32.5
PORTAINER_TAG=2.21.5
DIUN_TAG=4.28

# Telemetry Stack
ZABBIX_TAG=7.0.0-alpine
GRAFANA_TAG=11.4.0
LOKI_TAG=3.3.2
ALLOY_TAG=v1.5.1
UPTIME_KUMA_TAG=1
CROWDSEC_TAG=latest
GRAFANA_RENDERER_TAG=latest

# Remote Stack
MESHCENTRAL_TAG=latest
GUACAMOLE_TAG=1.5.5
GUACD_TAG=1.5.5

# AI Stack
OLLAMA_TAG=latest
LITELLM_TAG=main-stable
REDIS_QUEUE_TAG=7-alpine
